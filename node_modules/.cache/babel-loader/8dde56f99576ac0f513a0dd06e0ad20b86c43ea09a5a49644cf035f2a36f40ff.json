{"ast":null,"code":"import _defineProperty from\"D:/Projeto-MoreLife/morelife/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/Projeto-MoreLife/morelife/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/Projeto-MoreLife/morelife/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from'./cssLogin/loginForm.module.css';//Import react-doms\nimport{useLocation}from'react-router-dom';import{useState,useEffect}from'react';//Import Components\nimport Input from'../form/input';import ButtonForm from'../form/buttonForm';import Message from'../layout/message';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(_ref){var handleSubmit=_ref.handleSubmit,btnText=_ref.btnText,userData=_ref.userData;var _useState=useState(userData||[]),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allUsers=_useState4[0],setAllUsers=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(\"success\"),_useState8=_slicedToArray(_useState7,2),type=_useState8[0],setType=_useState8[1];var location=useLocation();var msg=\"\";var email=\"\";var pass=\"\";useEffect(function(){fetch(\"http://localhost:5000/users\",{method:'GET',headers:{'Content-Type':'application/json'}}).then(function(resp){return resp.json();}).then(function(data){setAllUsers(data);}).catch(function(err){return console.log(err);});},[]);function validationForm(user){allUsers.map(function(allUser){if(allUser.user_email===user.email){if(allUser.user_pass===user.pass){email=allUser.user_email;pass=allUser.user_pass;}}});if(user.length===0){setMessage(\"Email ou senha inválidos!\");setType(\"error\");return false;}if(email!==user.email||user.email===\"\"){setMessage(\"Email ou senha inválidos!\");setType(\"error\");return false;}if(pass!==user.pass||user.pass===\"\"){setMessage(\"Email ou senha inválidos!\");setType(\"error\");return false;}msg=\"\";console.log(\"Sucesso!\");return handleSubmit(user);}var submit=function submit(e){e.preventDefault();validationForm(user);};function handleChange(e){setMessage(\"\");setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));if(e.target.value===''){setMessage('Email ou senha inválidos!');setType('error');return false;}}if(location.state){msg=location.state;}return/*#__PURE__*/_jsxs(\"div\",{className:styles.formContainer,children:[message!==\"\"&&/*#__PURE__*/_jsx(Message,{msg:message,type:type}),msg!==\"\"&&/*#__PURE__*/_jsx(Message,{msg:msg,type:type}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsx(Input,{type:\"text\",text:\"Email\",nameInput:\"email\",placeholder:\"Digite seu email\",handleOnChange:handleChange,customClass:user.email===''&&\"error\",value:user.email?user.email:''}),/*#__PURE__*/_jsx(Input,{type:\"password\",text:\"Senha\",nameInput:\"pass\",placeholder:\"Digite sua senha\",handleOnChange:handleChange,customClass:user.pass===''&&\"error\",value:user.pass?user.pass:''}),/*#__PURE__*/_jsx(\"div\",{className:styles.btnContainer,children:/*#__PURE__*/_jsx(ButtonForm,{text:btnText})})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.linkContainer,children:/*#__PURE__*/_jsxs(Link,{to:\"/register\",children:[\" N\\xE3o possui um cadastro?\",/*#__PURE__*/_jsx(\"br\",{}),\"Registre-se! \"]})})]});}export default LoginForm;","map":{"version":3,"names":["styles","useLocation","useState","useEffect","Input","ButtonForm","Message","Link","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","handleSubmit","btnText","userData","_useState","_useState2","_slicedToArray","user","setUser","_useState3","_useState4","allUsers","setAllUsers","_useState5","_useState6","message","setMessage","_useState7","_useState8","type","setType","location","msg","email","pass","fetch","method","headers","then","resp","json","data","catch","err","console","log","validationForm","map","allUser","user_email","user_pass","length","submit","e","preventDefault","handleChange","_objectSpread","_defineProperty","target","name","value","state","className","formContainer","children","onSubmit","text","nameInput","placeholder","handleOnChange","customClass","btnContainer","linkContainer","to"],"sources":["D:/Projeto-MoreLife/morelife/src/components/loginForm/loginForm.js"],"sourcesContent":["import styles from './cssLogin/loginForm.module.css'\r\n\r\n//Import react-doms\r\nimport { useLocation } from 'react-router-dom'\r\n\r\nimport { useState, useEffect } from 'react'\r\n\r\n//Import Components\r\nimport Input from '../form/input'\r\nimport ButtonForm from '../form/buttonForm'\r\nimport Message from '../layout/message'\r\n\r\nimport { Link } from 'react-router-dom'\r\n\r\nfunction LoginForm({ handleSubmit, btnText, userData }) {\r\n    const [user, setUser] = useState(userData || [])\r\n    const [allUsers, setAllUsers] = useState([])\r\n    const [message, setMessage] = useState(\"\")\r\n    const [type, setType] = useState(\"success\")\r\n    const location = useLocation()\r\n    let msg = \"\"\r\n    let email = \"\"\r\n    let pass = \"\"\r\n\r\n    useEffect(() => {\r\n        fetch(\"http://localhost:5000/users\", {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n            .then(resp => resp.json())\r\n            .then(data => {\r\n                setAllUsers(data)\r\n            })\r\n            .catch(err => console.log(err))\r\n    }, [])\r\n\r\n    function validationForm(user) {\r\n        allUsers.map(allUser => {\r\n            if (allUser.user_email === user.email) {\r\n                if (allUser.user_pass === user.pass) {\r\n                    email = allUser.user_email\r\n                    pass = allUser.user_pass\r\n                }\r\n            }\r\n        })\r\n        if (user.length === 0) {\r\n            setMessage(\"Email ou senha inválidos!\")\r\n            setType(\"error\")\r\n            return false\r\n        }\r\n        if (email !== user.email || user.email === \"\") {\r\n            setMessage(\"Email ou senha inválidos!\")\r\n            setType(\"error\")\r\n            return false\r\n        }\r\n        if (pass !== user.pass || user.pass === \"\") {\r\n            setMessage(\"Email ou senha inválidos!\")\r\n            setType(\"error\")\r\n            return false\r\n        }\r\n\r\n        msg = \"\"\r\n        console.log(\"Sucesso!\")\r\n        return handleSubmit(user)\r\n    }\r\n\r\n    const submit = (e) => {\r\n        e.preventDefault()\r\n        validationForm(user)\r\n    }\r\n\r\n    function handleChange(e) {\r\n        setMessage(\"\")\r\n        setUser({ ...user, [e.target.name]: e.target.value })\r\n        if (e.target.value === '') {\r\n            setMessage('Email ou senha inválidos!')\r\n            setType('error')\r\n            return false\r\n        }\r\n    }\r\n\r\n    if (location.state) {\r\n        msg = location.state\r\n    }\r\n\r\n    return (\r\n        <div className={styles.formContainer}>\r\n            {message !== \"\" && (<Message msg={message} type={type} />)}\r\n            {msg !== \"\" && (<Message msg={msg} type={type} />)}\r\n            <form onSubmit={submit}>\r\n                <Input\r\n                    type=\"text\"\r\n                    text=\"Email\"\r\n                    nameInput=\"email\"\r\n                    placeholder=\"Digite seu email\"\r\n                    handleOnChange={handleChange}\r\n                    customClass={user.email === '' && \"error\"}\r\n                    value={user.email ? user.email : ''}\r\n                />\r\n                <Input\r\n                    type=\"password\"\r\n                    text=\"Senha\"\r\n                    nameInput=\"pass\"\r\n                    placeholder=\"Digite sua senha\"\r\n                    handleOnChange={handleChange}\r\n                    customClass={user.pass === '' && \"error\"}\r\n                    value={user.pass ? user.pass : ''}\r\n                />\r\n\r\n                <div className={styles.btnContainer}>\r\n                    <ButtonForm\r\n                        text={btnText}\r\n                    />\r\n                </div>\r\n            </form>\r\n            <div className={styles.linkContainer}>\r\n                <Link to=\"/register\"> Não possui um cadastro?<br />Registre-se! </Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoginForm"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}